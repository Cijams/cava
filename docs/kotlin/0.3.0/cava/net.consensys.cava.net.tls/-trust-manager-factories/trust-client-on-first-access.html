<HTML>
<HEAD>
<meta charset="UTF-8">
<title>TrustManagerFactories.trustClientOnFirstAccess - cava</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">cava</a>&nbsp;/&nbsp;<a href="../index.html">net.consensys.cava.net.tls</a>&nbsp;/&nbsp;<a href="index.html">TrustManagerFactories</a>&nbsp;/&nbsp;<a href="./trust-client-on-first-access.html">trustClientOnFirstAccess</a><br/>
<br/>
<h1>trustClientOnFirstAccess</h1>
<a name="net.consensys.cava.net.tls.TrustManagerFactories$trustClientOnFirstAccess(java.nio.file.Path)"></a>
<code><span class="keyword">static</span> <span class="keyword">fun </span><span class="identifier">trustClientOnFirstAccess</span><span class="symbol">(</span><span class="identifier" id="net.consensys.cava.net.tls.TrustManagerFactories$trustClientOnFirstAccess(java.nio.file.Path)/knownClientsFile">knownClientsFile</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html"><span class="identifier">Path</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/TrustManagerFactory.html"><span class="identifier">TrustManagerFactory</span></a></code> <a href="https://github.com/consensys/cava/blob/master//net/src/main/java/net/consensys/cava/net/tls/TrustManagerFactories.java#L262">(source)</a>
<p>Accept CA-signed client certificates, and otherwise trust client certificates on first access. 
<p> Except when a client presents a CA-signed certificate, on first connection to this server the common name and fingerprint of the presented certificate will be recorded. On subsequent connections, the client will be rejected if the fingerprint has changed. </p>
<p> <em>Note: unlike the seemingly equivalent <code><a href="trust-server-on-first-use.html">#trustServerOnFirstUse(Path)</a></code> method for authenticating servers, this method for authenticating clients is <strong>insecure</strong> and <strong>provides zero confidence in client identity</strong>. Unlike the server version, which bases the identity on the hostname and port the connection is being established to, the client version only uses the common name of the certificate that the connecting client presents. Therefore, clients can circumvent access control by using a different common name from any previously recorded client.</em></p>
</p>
<h3>Parameters</h3>
<p><a name="knownClientsFile"></a>
<code>knownClientsFile</code> - The path to the file containing fingerprints.</p>
<p><strong>Return</strong><br/>
A trust manager factory.</p>
<a name="net.consensys.cava.net.tls.TrustManagerFactories$trustClientOnFirstAccess(java.nio.file.Path, kotlin.Boolean)"></a>
<code><span class="keyword">static</span> <span class="keyword">fun </span><span class="identifier">trustClientOnFirstAccess</span><span class="symbol">(</span><span class="identifier" id="net.consensys.cava.net.tls.TrustManagerFactories$trustClientOnFirstAccess(java.nio.file.Path, kotlin.Boolean)/knownClientsFile">knownClientsFile</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html"><span class="identifier">Path</span></a><span class="symbol">, </span><span class="identifier" id="net.consensys.cava.net.tls.TrustManagerFactories$trustClientOnFirstAccess(java.nio.file.Path, kotlin.Boolean)/acceptCASigned">acceptCASigned</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/TrustManagerFactory.html"><span class="identifier">TrustManagerFactory</span></a></code> <a href="https://github.com/consensys/cava/blob/master//net/src/main/java/net/consensys/cava/net/tls/TrustManagerFactories.java#L285">(source)</a>
<p>Trust client certificates on first access. 
<p> on first connection to this server the common name and fingerprint of the presented certificate will be recorded. On subsequent connections, the client will be rejected if the fingerprint has changed. </p>
<p> <em>Note: unlike the seemingly equivalent <code><a href="trust-server-on-first-use.html">#trustServerOnFirstUse(Path)</a></code> method for authenticating servers, this method for authenticating clients is <strong>insecure</strong> and <strong>provides zero confidence in client identity</strong>. Unlike the server version, which bases the identity on the hostname and port the connection is being established to, the client version only uses the common name of the certificate that the connecting client presents. Therefore, clients can circumvent access control by using a different common name from any previously recorded client.</em></p>
</p>
<h3>Parameters</h3>
<p><a name="knownClientsFile"></a>
<code>knownClientsFile</code> - The path to the file containing fingerprints.</p>
<p><a name="acceptCASigned"></a>
<code>acceptCASigned</code> - If true, CA-signed certificates will always be accepted.</p>
<p><strong>Return</strong><br/>
A trust manager factory.</p>
<a name="net.consensys.cava.net.tls.TrustManagerFactories$trustClientOnFirstAccess(java.nio.file.Path, javax.net.ssl.TrustManagerFactory)"></a>
<code><span class="keyword">static</span> <span class="keyword">fun </span><span class="identifier">trustClientOnFirstAccess</span><span class="symbol">(</span><span class="identifier" id="net.consensys.cava.net.tls.TrustManagerFactories$trustClientOnFirstAccess(java.nio.file.Path, javax.net.ssl.TrustManagerFactory)/knownClientsFile">knownClientsFile</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html"><span class="identifier">Path</span></a><span class="symbol">, </span><span class="identifier" id="net.consensys.cava.net.tls.TrustManagerFactories$trustClientOnFirstAccess(java.nio.file.Path, javax.net.ssl.TrustManagerFactory)/tmf">tmf</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/TrustManagerFactory.html"><span class="identifier">TrustManagerFactory</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/TrustManagerFactory.html"><span class="identifier">TrustManagerFactory</span></a></code> <a href="https://github.com/consensys/cava/blob/master//net/src/main/java/net/consensys/cava/net/tls/TrustManagerFactories.java#L309">(source)</a>
<p>Accept CA-signed certificates, and otherwise trust client certificates on first access. 
<p> Except when a client presents a CA-signed certificate, on first connection to this server the common name and fingerprint of the presented certificate will be recorded. On subsequent connections, the client will be rejected if the fingerprint has changed. </p>
<p> <em>Note: unlike the seemingly equivalent <code><a href="trust-server-on-first-use.html">#trustServerOnFirstUse(Path)</a></code> method for authenticating servers, this method for authenticating clients is <strong>insecure</strong> and <strong>provides zero confidence in client identity</strong>. Unlike the server version, which bases the identity on the hostname and port the connection is being established to, the client version only uses the common name of the certificate that the connecting client presents. Therefore, clients can circumvent access control by using a different common name from any previously recorded client.</em></p>
</p>
<h3>Parameters</h3>
<p><a name="knownClientsFile"></a>
<code>knownClientsFile</code> - The path to the file containing fingerprints.</p>
<p><a name="tmf"></a>
<code>tmf</code> - A TrustManagerFactory for checking server certificates against a CA.</p>
<p><strong>Return</strong><br/>
A trust manager factory.</p>
</BODY>
</HTML>
